<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Python objects | Héctor Climente-González </title> <meta name="author" content="Héctor Climente-González"> <meta name="description" content="Everything is an object!"> <meta name="keywords" content="machine-learning, genetics, pharma, drug-discovery, climente, climente-gonzalez"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%AA%A2&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hclimente.github.io/blog/python-objects/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Héctor</span> Climente-González </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Python objects</h1> <p class="post-meta"> Created in February 08, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/python"> <i class="fa-solid fa-hashtag fa-sm"></i> python</a>   <a href="/blog/tag/coding"> <i class="fa-solid fa-hashtag fa-sm"></i> coding</a>   <a href="/blog/tag/objects"> <i class="fa-solid fa-hashtag fa-sm"></i> objects</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p><em>Python has been the programming language I used most in the past decade. In this series, I explore its more advanced features.</em></p> <p>It is often said that in Python, everything is an object: builtins, functions, classes, instances, etc. Thus, improving our understanding of objects will is key to mastering Python. In this first post I explore some general concepts related to objects.</p> <h1 id="properties-of-an-object">Properties of an object</h1> <p>Simply put, an object is a data structure with an internal state (a set of variables) and a behaviour (a set of functions). The “class” is the template to create new objects or instances. New objects are defined using the <code class="language-plaintext highlighter-rouge">class</code> operator, and instantiated using the class name.</p> <p>Every object has, at least, three properties: a reference, a class, and a refcount.</p> <h2 id="reference">Reference</h2> <p>A <em>reference</em> is a pointer, a way to access the memory address that stores the object. It can be associated to a name, or an element in a collection:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a new integer object, and
# copy its reference to the name "a"
</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># create a new integer object, and
# append its reference to the list "x"
</span><span class="n">x</span> <span class="o">=</span> <span class="nf">list</span><span class="p">()</span>
<span class="n">x</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <p>We can retrieve the memory address using <code class="language-plaintext highlighter-rouge">id()</code>, represented as an integer:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4342270592
</code></pre></div></div> <p>Note that the assignment operator (<code class="language-plaintext highlighter-rouge">=</code>) <strong>never</strong> makes a copy of the value being assigned, it just copies the reference. Similarly, the <code class="language-plaintext highlighter-rouge">del</code> operator never deletes an object, just a reference to it. We can check if two names point to the same memory location using <code class="language-plaintext highlighter-rouge">is</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span>

<span class="c1"># same reference?
</span><span class="k">assert</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">z</span>
<span class="k">assert</span> <span class="nf">id</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nf">id</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">y</span>

<span class="c1"># same value?
</span><span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
</code></pre></div></div> <h2 id="class">Class</h2> <p>A <em>class</em> is the type of the object (e.g., a float, or a str). Each object contains a pointer to its class, <a href="#the-two-dictionaries-underlying-an-object">as we will see below</a>. We can know an object’s class using the <code class="language-plaintext highlighter-rouge">type</code> operator:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'int'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">1</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'str'&gt;
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">type</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'float'&gt;
</code></pre></div></div> <p>Similarly, we can check if an object is an instance of a given class:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="nf">isinstance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="k">assert</span> <span class="nf">isinstance</span><span class="p">(</span><span class="sh">"</span><span class="s">1</span><span class="sh">"</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="k">assert</span> <span class="nf">isinstance</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
</code></pre></div></div> <h2 id="refcount">Refcount</h2> <p>The <em>refcount</em> is a counter that keeps track of how many references point to an object. Its value gets increased by 1 when, for instance, an object gets assigned to a new name. It gets decreased by 1 when a name goes out of scope or is explicitly deleted (<code class="language-plaintext highlighter-rouge">del</code>). When the refcount reaches 0, its object’s memory will be <a href="/blog/python-basics/#memory-management-in-python">reclaimed by the garbage collector</a>.</p> <p>In principle, we can access the refcounts of a variable using <code class="language-plaintext highlighter-rouge">sys.getrefcount</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">sys</span><span class="p">.</span><span class="nf">getrefcount</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
</code></pre></div></div> <p>Note that its output of <code class="language-plaintext highlighter-rouge">getrefcount</code> is always increased by 1, as the function itself contains a reference for the variable. Let’s see another example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sys</span><span class="p">.</span><span class="nf">getrefcount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>218
</code></pre></div></div> <p>I expected that a newly created integer would have a <code class="language-plaintext highlighter-rouge">refcount</code> of 1. However, the actual number is much higher. <a href="https://stackoverflow.com/a/44096890" rel="external nofollow noopener" target="_blank">The explanation might involve optimizations happening under the hood.</a> Accordingly, the refcount of more and more unique integers gets smaller:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">sys</span><span class="p">.</span><span class="nf">refcount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">sys</span><span class="p">.</span><span class="nf">getrefcount</span><span class="p">(</span><span class="mi">123456</span><span class="p">)</span>
</code></pre></div></div> <h2 id="other-properties">Other properties</h2> <p>On top of these three properties, objects have additional properties and methods that encode their state and behaviors. For instance, the <code class="language-plaintext highlighter-rouge">float</code> class has an additional property that stores the numerical value, as well as multiple methods that enable algebraic operations. A user-defined object will have an arbitrary number of attributes and methods.</p> <p>Notably, the <code class="language-plaintext highlighter-rouge">None</code> object has no other properties. It is a singleton: only one such object exists:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">b</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c1"># same object, despite independent assignments
</span><span class="k">assert</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
</code></pre></div></div> <h1 id="objects-are-first-class-citizens">Objects are first-class citizens</h1> <p>Objects are first-class citizens in Python. In other words, they can:</p> <ul> <li>Be assigned a name:</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">pretty_print</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nf">title</span><span class="p">()</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.</span><span class="sh">"</span><span class="p">)</span>

<span class="n">pp</span> <span class="o">=</span> <span class="n">pretty_print</span>
<span class="nf">pp</span><span class="p">(</span><span class="sh">"</span><span class="s">hey there</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hey there.
</code></pre></div></div> <ul> <li>Be passed as arguments:</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Callable</span>

<span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">formatter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="bp">None</span><span class="p">]):</span>
    <span class="nf">formatter</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="nf">format</span><span class="p">(</span><span class="sh">"</span><span class="s">hey there</span><span class="sh">"</span><span class="p">,</span> <span class="n">pretty_print</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hey there.
</code></pre></div></div> <ul> <li>Be returned by other functions:</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">formatter_factory</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">pretty_print</span>

<span class="nf">formatter_factory</span><span class="p">()(</span><span class="sh">"</span><span class="s">hey there</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hey there.
</code></pre></div></div> <h1 id="copying-objects">Copying objects</h1> <p>As mentioned above, <code class="language-plaintext highlighter-rouge">=</code> does not copy objects, only references. If we need to copy an object, we need to use the <code class="language-plaintext highlighter-rouge">copy</code> module. There are two kinds of copies:</p> <ul> <li> <strong>Shallow copy:</strong> <code class="language-plaintext highlighter-rouge">copy.copy</code> copies the object, but any reference it stores will just get copied, i.e., not the whole referenced object.</li> <li> <strong>Deep copy:</strong> <code class="language-plaintext highlighter-rouge">copy.deepcopy</code> recursively copies the object, all the objects it references to, and so on.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">copy</span> <span class="kn">import</span> <span class="n">copy</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="c1"># copies the two first integers, but only
# the reference to the 3rd element
</span><span class="n">y</span> <span class="o">=</span> <span class="nf">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[3, 4, 5]
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="c1"># copies the two first integers as
# well as the list
</span><span class="n">y</span> <span class="o">=</span> <span class="nf">deepcopy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[3, 4]
</code></pre></div></div> <h1 id="defining-our-own-objects">Defining our own objects</h1> <p>Python allows us to define our own classes:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>

    <span class="n">phylum</span> <span class="o">=</span> <span class="sh">"</span><span class="s">metazoan</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__favorite</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">eat</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">chompchomp</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p>Below I zoom in on some interesting features.</p> <h2 id="private-and-protected-attributes">Private and protected attributes</h2> <p>In other languages, a class’ attributes can be set as protected (only accessible within the class and subclasses) or as private (only accessible within the class). While you can always modify attributes from the outside in Python, the language emulates protected and private attributes by prepending one or two underscores respectively:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">whale</span> <span class="o">=</span> <span class="nc">Animal</span><span class="p">(</span><span class="sh">"</span><span class="s">whale</span><span class="sh">"</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
<span class="n">whale</span><span class="p">.</span><span class="n">__favorite</span> <span class="c1"># a private attribute
</span></code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AttributeError: 'Animal' object has no attribute '__favorite'
</code></pre></div></div> <p>If we want to access that attribute, we need to put some extra effort:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="n">whale</span><span class="p">.</span><span class="n">_Animal__favorite</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>True
</code></pre></div></div> <p>However, and rather confusingly, this is valid:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">whale</span><span class="p">.</span><span class="n">__favorite</span> <span class="o">=</span> <span class="bp">False</span>
<span class="nf">print</span><span class="p">(</span><span class="n">whale</span><span class="p">.</span><span class="n">_Animal__favorite</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">whale</span><span class="p">.</span><span class="n">__favorite</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>True
False
</code></pre></div></div> <h2 id="the-two-dictionaries-underlying-an-object">The two dictionaries underlying an object</h2> <p>Two dictionaries underlie each object, and are accessible using <code class="language-plaintext highlighter-rouge">instance.__dict__</code> and <code class="language-plaintext highlighter-rouge">Class.__dict__</code>. The first one is the instance-specific dictionary, unique to that instance and containing its writable attributes:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">whale</span> <span class="o">=</span> <span class="nc">Animal</span><span class="p">(</span><span class="sh">"</span><span class="s">whale</span><span class="sh">"</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">whale</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'name': 'whale', 'weight': 100000, '_Animal__favorite': True}
</code></pre></div></div> <p>Note that private attributes like <code class="language-plaintext highlighter-rouge">__favorite</code> appear with an altered name of the form <code class="language-plaintext highlighter-rouge">_{class name}{attribute}</code>.</p> <p>Similarly, each class has its own dictionary, containing the data and functions used by all instances (class’ methods, the attributes defined at the class level, etc.):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Animal</span><span class="p">.</span><span class="n">__dict__</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mappingproxy({'__module__': '__main__', 'phylum': 'metazoan', '__init__': &lt;function Animal.__init__ at 0x103236b90&gt;, 'eat': &lt;function Animal.eat at 0x103236c20&gt;, '__dict__': &lt;attribute '__dict__' of 'Animal' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Animal' objects&gt;, '__doc__': None})
</code></pre></div></div> <p>For instance, this is where the <code class="language-plaintext highlighter-rouge">Animal.eat()</code> method lives. This dictionary is shared by all the instances, which is why every non-static method requires the instance to be passed as the first argument. Under the hood, when we call an instance’s method, Python finds the method in the class dictionary and passes the instance as first argument. But we can also do it explicitly:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Animal</span><span class="p">.</span><span class="n">__dict__</span><span class="p">[</span><span class="sh">"</span><span class="s">eat</span><span class="sh">"</span><span class="p">]()</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: Animal.eat() missing 1 required positional argument: 'self'
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Animal</span><span class="p">.</span><span class="n">__dict__</span><span class="p">[</span><span class="sh">"</span><span class="s">eat</span><span class="sh">"</span><span class="p">](</span><span class="n">whale</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chompchomp
</code></pre></div></div> <p>Both dictionaries are linked by <code class="language-plaintext highlighter-rouge">instance.__class__</code>, which is assigned to the class object:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">whale</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__dict__</span> <span class="o">==</span> <span class="n">Animal</span><span class="p">.</span><span class="n">__dict__</span>
</code></pre></div></div> <p>As we saw, an attribute might exist in either dictionary. To find an attribute at runtime, Python will first search <code class="language-plaintext highlighter-rouge">instance.__dict__</code>, and then <code class="language-plaintext highlighter-rouge">Class.__dict__</code> if unsuccessful.</p> <h2 id="__slots__-helps-with-memory-optimization"> <code class="language-plaintext highlighter-rouge">__slots__</code> helps with memory optimization</h2> <p>The instance’s dictionary keeps the class flexible, since we can add new attributes at any time:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">whale</span><span class="p">.</span><span class="n">medium</span> <span class="o">=</span> <span class="sh">"</span><span class="s">water</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="n">whale</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'name': 'whale', 'weight': 100000, '_Animal__favorite': True, 'medium': 'water'}
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">__slots__</code> allows us to fix the possible attributes a priori, allowing Python to reserve the exact amoung of memory needed and to bypass the creation of the dictionary:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EfficientAnimal</span><span class="p">:</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">weight</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">__favorite</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">phylum</span> <span class="o">=</span> <span class="sh">"</span><span class="s">metazoan</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__favorite</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">dog</span> <span class="o">=</span> <span class="nc">EfficientAnimal</span><span class="p">(</span><span class="sh">"</span><span class="s">dog</span><span class="sh">"</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">dog</span><span class="p">.</span><span class="n">__dict__</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AttributeError: 'EfficientAnimal' object has no attribute '__dict__'. Did you mean: '__dir__'?
</code></pre></div></div> <p>In addition to the memory optimizations, this approach also helps to prevent bugs caused by typos in variable names:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dog</span><span class="p">.</span><span class="n">namme</span> <span class="o">=</span> <span class="sh">"</span><span class="s">puppy</span><span class="sh">"</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AttributeError: 'EfficientAnimal' object has no attribute 'namme'
</code></pre></div></div> <h1 id="further-reading">Further reading</h1> <ul> <li>D. Beazley, <a href="https://github.com/dabeaz-course/python-mastery" rel="external nofollow noopener" target="_blank">Advanced Python Mastery</a> </li> <li>https://www.interviewbit.com/python-interview-questions/#freshers</li> <li>More on classes: <a href="https://docs.python.org/3/tutorial/classes.html" rel="external nofollow noopener" target="_blank">https://docs.python.org/3/tutorial/classes.html</a> </li> <li>More on <code class="language-plaintext highlighter-rouge">__slots__</code>: <a href="https://wiki.python.org/moin/UsingSlots" rel="external nofollow noopener" target="_blank">https://wiki.python.org/moin/UsingSlots</a> </li> </ul> </div> </article> <div id="giscus_thread" style="max-width: 930px; margin: 0 auto;"> <script>
      let giscusTheme = determineComputedTheme();
      let giscusAttributes = {
        src: 'https://giscus.app/client.js',
        'data-repo': 'hclimente/hclimente.github.io',
        'data-repo-id': '',
        'data-category': 'Comments',
        'data-category-id': '',
        'data-mapping': 'title',
        'data-strict': '1',
        'data-reactions-enabled': '1',
        'data-emit-metadata': '0',
        'data-input-position': 'bottom',
        'data-theme': giscusTheme,
        'data-lang': 'en',
        crossorigin: 'anonymous',
        async: '',
      };

      let giscusScript = document.createElement('script');
      Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
      document.getElementById('giscus_thread').appendChild(giscusScript);
    </script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 Héctor Climente-González. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>