<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Python dictionaries | Héctor Climente-González </title> <meta name="author" content="Héctor Climente-González"> <meta name="description" content="Keeping Python together since 1991"> <meta name="keywords" content="machine-learning, genetics, pharma, drug-discovery, climente, climente-gonzalez"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%AA%A2&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hclimente.github.io/blog/python-dicts/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Héctor</span> Climente-González </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Python dictionaries</h1> <p class="post-meta"> Created in February 10, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/python"> <i class="fa-solid fa-hashtag fa-sm"></i> python</a>   <a href="/blog/tag/coding"> <i class="fa-solid fa-hashtag fa-sm"></i> coding</a>   <a href="/blog/tag/dictionary"> <i class="fa-solid fa-hashtag fa-sm"></i> dictionary</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>A dictionary is a data structure that stores key-value pairs. As we saw in the previous post and will keep exploring, dictionaries are behind many of Python’s features, including objects and namespaces. In this post, I do a deep dive in the underpinnings on Python’s dictionaries, and describe some useful features.</p> <h1 id="the-inner-workings-of-dictionaries-and-sets">The inner workings of dictionaries (and sets)</h1> <p>Dictionaries and sets are ideal data structures to collect items when 1. the data has no intrinsic order; and 2. elements can be retrieved using <em>keys</em>, i.e., so-called <em>hashable</em> objects (further described below). The underpinnings of dictionaries and sets are very similar, a data structure called the <em>hash map</em>. <a href="/blog/python-lists/">Similarly to lists and tuples</a>, we can visualize it as a finite number of memory buckets, each of which can store a reference to an object. The number of buckets is called the <em>capacity</em>. Each possible key maps univocally to a bucket, thanks to the hash function. Hence, lookups, insertions and deletions are performed in constant time. The difference between dictionaries and sets lies in what goes in the bucket: dictionaries store key-value pairs, while sets only store keys.</p> <h2 id="hashing-explained">Hashing, explained</h2> <p>Hash maps rely on the key objects implementing a hash method (<code class="language-plaintext highlighter-rouge">.__hash__()</code>). This function maps each object to a fixed-byte integer. When we apply the <code class="language-plaintext highlighter-rouge">hash()</code> function to the object, its hash method gets called. The hash method needs to be fast, since all operations on a hash map are limited by its speed. In addition, it needs to be deterministic and produce fixed-length values. For reasons we will go over later, a <em>hashable</em> object needs to additionally implement either an <code class="language-plaintext highlighter-rouge">__eq__</code> operator, or a <code class="language-plaintext highlighter-rouge">__cmp__</code> operator.</p> <p>Let’s see some examples using the immutable builtins:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">hash</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>        <span class="c1"># 1
</span><span class="nf">hash</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span>       <span class="c1"># 1
</span><span class="nf">hash</span><span class="p">(</span><span class="sh">"</span><span class="s">1</span><span class="sh">"</span><span class="p">)</span>      <span class="c1"># 6333942777250828306
</span>
<span class="nf">hash</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>      <span class="c1"># 1
</span><span class="nf">hash</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>   <span class="c1"># 8389048192121911274
</span><span class="nf">hash</span><span class="p">((</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">))</span> <span class="c1"># 8389048192121911274
</span></code></pre></div></div> <p>Imagine that our hash map has a capacity of 16, i.e., we have 16 buckets indexed from 0 to 15. However, as we just saw, hashing can produce very large integers, which makes it impossible to use the integer as a bucket index. To keep things small, let’s say our object’s hash is 62. To map 62 to one of our 16 buckets, we need an additional operation called <em>mask</em>. A simple mask is the modulo function using the capacity, which will always produce a value between 0 and 15:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">62</span> <span class="o">%</span> <span class="mi">15</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
</code></pre></div></div> <p>In other words, 62 would map to bucket number 2. However, there are faster <em>masks</em>. Specifically, Python uses the bitwise AND (<code class="language-plaintext highlighter-rouge">&amp;</code>):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># bin(62) = 0b111110
#               &amp;
# bin(15) = 0b001111
# ------------------
#           0b001110 = 14
</span><span class="mi">62</span> <span class="o">&amp;</span> <span class="mi">15</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14
</code></pre></div></div> <p>Note that since the number of buckets will often be much smaller than the hash, <code class="language-plaintext highlighter-rouge">&amp;</code> is effectively operating only on the tails.</p> <h2 id="storing-data-into-a-bucket-handling-collisions">Storing data into a bucket: handling collisions</h2> <p>If the number of <em>empty</em> buckets is large enough, a new key can be mapped to an empty bucket with high probability. (Empty buckets contain a <code class="language-plaintext highlighter-rouge">NULL</code> value.) In that case, we will simply store the key-value pair in the bucket.</p> <p>However, it is possible that the bucket is already occupied. In that case, Python will first check if the keys are equal. That is why 1. we store the key object in the bucket; and 2. the key object needs to implement <code class="language-plaintext highlighter-rouge">.__eq__</code> or <code class="language-plaintext highlighter-rouge">.__cmp__</code>. If there is a match, the key-value pair gets updated. Otherwise, we have a collision, i.e., two keys map to the same bucket. In that case, a deterministic exploration of other buckets starts. The details of this process, called <em>probing</em>, are beyond the scope of this article. Once an empty bucket is found, the key-value pair will be stored there. At lookup time, this probing process will be followed, until either the right key or an empty bucket is found.</p> <p>When a value is deleted, we cannot simply overwrite it with a <code class="language-plaintext highlighter-rouge">NULL</code>. That would make the bucket identical to a “virgin” bucket, and potentially disrupt the probing strategy, leading to inconsistent results. Instead, a special value is written (sometimes called a “turd”). Nonetheless, this memory is not wasted: another key-value pair can take its place if needed, without compromising the integrity of the data.</p> <p><strong>Note:</strong> User-defined classes are hashable by default, even if they don’t implement <code class="language-plaintext highlighter-rouge">__hash__</code>, <code class="language-plaintext highlighter-rouge">__eq__</code> or <code class="language-plaintext highlighter-rouge">__cmp__</code>. The hash is computed using the object’s <code class="language-plaintext highlighter-rouge">id()</code>, and all objects compare unequal.</p> <h2 id="time-complexity">Time complexity</h2> <p>Understanding what underlies dictionaries and sets allows us to estimate the time complexity of the different operations.</p> <p><strong>Lookup</strong>: given a key, in the vast majority of cases a lookup is done in \(O(1)\). The actual time depends on how fast the hash function is. Collisions are the main hurdle to lookup: in the worst case, all keys collide, meaning we have to iterate over all the elements to find ours. In that case, complexity is \(O(n)\). Luckily, a good hash function ensures that colisions are very rare.</p> <p><strong>Insertion</strong>: for similar reasons, the amortized time complexity is \(O(1)\) and the worst case is \(O(n)\).</p> <p><strong>Deletion</strong>: for similar reasons, the amortized time complexity is \(O(1)\) and the worst case is \(O(n)\).</p> <p><strong>Resizing</strong>: Python doubles the capacity of a dictionary when it becomes 2/3 full. Similarly, the capacity of a set gets quadrupled when it becomes 2/3 full. When such a thing happens, all key-value pairs need to be relocated into their new buckets. This is a pretty expensive step, albeit very infrequent, which keeps the amortized insertion complexity at \(O(1)\).</p> <h2 id="a-dictionary-implementation">A dictionary implementation</h2> <p>Putting it all together, this is a very rough implementation of a dictionary:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">collections.abc</span> <span class="kn">import</span> <span class="n">Hashable</span>
<span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="k">class</span> <span class="nc">Dictionary</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    A dictionary implementation using linear probing for collision resolution.
    </span><span class="sh">"""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Initialize the Dictionary with a given capacity.

        Parameters:
        - capacity (int): The initial capacity of the dictionary.

        Returns:
        - None
        </span><span class="sh">"""</span>

        <span class="c1"># virgin buckets are set to None, deleted buckets to False
</span>        <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">capacity</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__size</span> <span class="o">=</span> <span class="n">capacity</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__n_items</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Set the value for a given key in the dictionary.

        Parameters:
        - key (Hashable): The key to be inserted.
        - value (Any): The value associated with the key.

        Returns:
        - None
        </span><span class="sh">"""</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">__find_key_bucket</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__n_items</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">__resize_check</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Get the value associated with a given key from the dictionary.

        Parameters:
        - key (Hashable): The key whose value needs to be retrieved.

        Returns:
        - Any: The value associated with the given key.

        Raises:
        - KeyError: If the key is not found in the dictionary.
        </span><span class="sh">"""</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">__find_key_bucket</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Check if the dictionary contains a given key.

        Parameters:
        - key (Hashable): The key to check for existence in the dictionary.

        Returns:
        - bool: True if the key is present in the dictionary, False otherwise.
        </span><span class="sh">"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">__find_key_bucket</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="k">return</span> <span class="nf">bool</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>


    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Delete the entry for a given key from the dictionary.

        Parameters:
        - key (Hashable): The key to be deleted.

        Returns:
        - None

        Raises:
        - KeyError: If the key is not found in the dictionary.
        </span><span class="sh">"""</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">__find_key_bucket</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__n_items</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__resize_check</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Check if resizing of the dictionary is necessary based on the load factor (2/3).

        Returns:
        - None
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">__n_items</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">__size</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">new_size</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">__size</span>
        <span class="n">dummy_dict</span> <span class="o">=</span> <span class="nc">Dictionary</span><span class="p">(</span><span class="n">new_size</span><span class="p">)</span>

        <span class="c1"># reinsert all existing key-value pairs
</span>        <span class="k">for</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bucket</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">bucket</span>
            <span class="n">dummy_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">self</span><span class="p">.</span><span class="n">__size</span> <span class="o">=</span> <span class="n">new_size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span> <span class="o">=</span> <span class="n">dummy_dict</span><span class="p">.</span><span class="n">__buckets</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__n_items</span> <span class="o">=</span> <span class="n">dummy_dict</span><span class="p">.</span><span class="n">__n_items</span>

    <span class="k">def</span> <span class="nf">__find_key_bucket</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">
        Find the index of the bucket corresponding to a given key.

        Parameters:
        - key (Hashable): The key to be found.

        Returns:
        - int: The index of the bucket.

        Raises:
        - KeyError: If the key is not found in the dictionary.
        </span><span class="sh">"""</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="nf">hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">__size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">n_iters</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># find an empty bucket (either None or False)
</span>        <span class="k">while</span> <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span>

            <span class="c1"># stop once we have checked all buckets
</span>            <span class="k">if</span> <span class="n">n_iters</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">__size</span><span class="p">:</span>
                <span class="k">raise</span> <span class="nb">KeyError</span>

            <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">__buckets</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                    <span class="k">break</span>

            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n_iters</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">__size</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">idx</span>
</code></pre></div></div> <p>Let’s see it in action:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># I show under each command shows the the internal bucket state
</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="nc">Dictionary</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># [None, None, None, None]
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span>
<span class="c1"># [None, (1, 'a'), None, None]
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span>
<span class="c1"># [None, (1, 'a'), (2, 'b'), None]
</span>
<span class="c1"># 75% is full, which will trigger a resizing
</span><span class="n">my_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span>
<span class="c1"># [None, (1, 'a'), (2, 'b'), None, None, (5, 'c'), None,
#  None, None, None, None, None, None, None, None, None]
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">140</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">d</span><span class="sh">"</span>
<span class="c1"># [None, (1, 'a'), (2, 'b'), None, None, (5, 'c'), None,
#  None, None, None, None, None, (140, 'd'), None, None, None]
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="c1"># [None, (1, 2), (2, 'b'), None, None, (5, 'c'), None, None,
#  None, None, None, None, (140, 'd'), None, None, None]
</span>
<span class="mi">1</span> <span class="ow">in</span> <span class="n">my_dict</span> <span class="c1"># True
</span>
<span class="k">del</span> <span class="n">my_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># [None, False, (2, 'b'), None, None, (5, 'c'), None, None,
#  None, None, None, None, (140, 'd'), None, None, None]
</span>
<span class="mi">1</span> <span class="ow">in</span> <span class="n">my_dict</span> <span class="c1"># False
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">x</span><span class="sh">"</span>
<span class="c1"># [None, (1, 'x'), (2, 'b'), None, None, (5, 'c'), None,
#  None, None, None, None, None, (140, 'd'), None, None, None]
</span>
<span class="n">my_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># x
</span><span class="n">my_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># b
</span></code></pre></div></div> <h1 id="starred-expressions">Starred expressions</h1> <p>Dictionaries have two star operators: <code class="language-plaintext highlighter-rouge">*</code> and <code class="language-plaintext highlighter-rouge">**</code>. Let’s see how they work:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">lettuces</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="nf">print</span><span class="p">({</span><span class="o">*</span><span class="n">ingredients</span><span class="p">})</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'tomatoes', 'carrots', 'lettuces'}
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">*</code> unpacked the keys, which went into a set.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">({</span><span class="o">**</span><span class="n">ingredients</span><span class="p">})</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'carrots': 3, 'tomatoes': 2, 'lettuces': 1}
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">**</code> unpacked the key-value pairs, which went into a new dictionary.</p> <h1 id="insertion-order-is-preserved">Insertion order is preserved</h1> <p>Since Python 3.6, Python dictionaries preserve insertion order, i.e., the items are printed in the same order in which they were inserted in the dictionary:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">lettuces</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'carrots': 3, 'tomatoes': 2, 'lettuces': 1}
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">lettuces</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'lettuces': 1, 'tomatoes': 2, 'carrots': 3}
</code></pre></div></div> <h1 id="merging-two-dictionaries">Merging two dictionaries</h1> <p>After Python 3.10, there are three ways of merging two dictionaries. Two of them are equivalent: unpacking using the <code class="language-plaintext highlighter-rouge">**</code> operator and the merge operator <code class="language-plaintext highlighter-rouge">|</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dairy_1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">cheese</span><span class="sh">"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">yogurt</span><span class="sh">"</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>

<span class="n">dairy_2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">cheese</span><span class="sh">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">paneer</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="p">{</span><span class="o">**</span><span class="n">dairy_1</span><span class="p">,</span> <span class="o">**</span><span class="n">dairy_2</span><span class="p">}</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'cheese': 3, 'yogurt': 4, 'paneer': 2}
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dairy_1</span> <span class="o">|</span> <span class="n">dairy_2</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'cheese': 3, 'yogurt': 4, 'paneer': 2}
</code></pre></div></div> <p>These options create a new dictionary with all the key-value pairs. As one might expect, the key insertion order is preserved from left to right. Note than when there are shared keys, the last value is kept.</p> <p>An alternative is <code class="language-plaintext highlighter-rouge">dict.update()</code>, wich merges the dictionaries in place, updating the values when a key is shared:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dairy_1</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dairy_2</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">dairy_1 = </span><span class="si">{</span><span class="n">dairy_1</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">dairy_2 = </span><span class="si">{</span><span class="n">dairy_2</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dairy_1 = {'cheese': 3, 'yogurt': 4, 'paneer': 2}
dairy_2 = {'cheese': 3, 'paneer': 2}
</code></pre></div></div> <p>This is more memory efficient, since it does not create a new dictionary. However, it is not desirable if we want to keep the original dictionaries.</p> <h1 id="handling-default-values">Handling default values</h1> <h2 id="dictsetdefault-to-set-and-fetch-values"> <code class="language-plaintext highlighter-rouge">dict.setdefault</code> to set and fetch values</h2> <p>The <a href="https://docs.python.org/3.8/library/stdtypes.html#dict.setdefault" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">dict.setdefault</code></a> method is useful to assign a value to a key if and only if the key is missing:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">lettuces</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">ingredients</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ingredients</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="sh">"</span><span class="s">pineapples</span><span class="sh">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Number of carrots: </span><span class="si">{</span><span class="n">ingredients</span><span class="p">[</span><span class="sh">'</span><span class="s">carrots</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Number of pineapples: </span><span class="si">{</span><span class="n">ingredients</span><span class="p">[</span><span class="sh">'</span><span class="s">pineapples</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of carrots: 3
Number of pineapples: 0
</code></pre></div></div> <p>However, and despite its name, <code class="language-plaintext highlighter-rouge">dict.setdefault</code> will also fetch the value (either the preexisting one, or the newly created):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">carrots</span> <span class="o">=</span> <span class="n">ingredients</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Number of carrots: </span><span class="si">{</span><span class="n">carrots</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of carrots: 3
</code></pre></div></div> <h2 id="use-defaultdict-when-there-is-a-single-default-value">Use <code class="language-plaintext highlighter-rouge">defaultdict</code> when there is a single default value</h2> <p>The <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">collections.defaultdict</code></a> goes one step beyond. They are a good replacement for dictionaries when there is a unique default value. Its first argument is a function which returns the default value. It will be called if and only if the key is missing:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">ingredients_dd</span> <span class="o">=</span> <span class="nf">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ingredient</span><span class="p">,</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">ingredients</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
    <span class="n">ingredients_dd</span><span class="p">[</span><span class="n">ingredient</span><span class="p">]</span> <span class="o">=</span> <span class="n">amount</span>

<span class="nf">print</span><span class="p">(</span><span class="n">ingredients_dd</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Number of cabbages: </span><span class="si">{</span><span class="n">ingredients_dd</span><span class="p">[</span><span class="sh">'</span><span class="s">cabbages</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients_dd</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaultdict(&lt;function &lt;lambda&gt; at 0x1014eb6d0&gt;, {'carrots': 3, 'tomatoes': 2, 'lettuces': 1, 'pineapples': 0})
Number of cabbages: 0
defaultdict(&lt;function &lt;lambda&gt; at 0x1014eb6d0&gt;, {'carrots': 3, 'tomatoes': 2, 'lettuces': 1, 'pineapples': 0, 'cabbage': 0})
</code></pre></div></div> <p>Note that the <code class="language-plaintext highlighter-rouge">ingredients_dd</code> contains an item for cabbages which was never explicitly inserted. <code class="language-plaintext highlighter-rouge">defaultdict</code> not only allows us to write simpler code, but is more efficient than <code class="language-plaintext highlighter-rouge">setdefault</code> to avoid unnecesary calls to the default factory. For instance, <code class="language-plaintext highlighter-rouge">ingredients.setdefault("carrot", set())</code> would instantiate a new set even if the key <code class="language-plaintext highlighter-rouge">carrot</code> already exists; <code class="language-plaintext highlighter-rouge">defaultdict</code> would avoid that call.</p> <h2 id="use-collectionscounter-to-count">Use <code class="language-plaintext highlighter-rouge">collections.Counter</code> to count</h2> <p>The <code class="language-plaintext highlighter-rouge">collections.Counter</code> is a type of dictionary specialized in counting objects, i.e., the values are integers. It can be initialized from an existing dictionary:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="n">ingredients_counter</span> <span class="o">=</span> <span class="nc">Counter</span><span class="p">(</span><span class="n">ingredients</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients_counter</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Counter({'carrots': 3, 'tomatoes': 2, 'lettuces': 1, 'pineapples': 0})
</code></pre></div></div> <p>By default missing keys have a value of 0, but they are not inserted:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Number of cabbages: </span><span class="si">{</span><span class="n">ingredients_counter</span><span class="p">[</span><span class="sh">'</span><span class="s">cabbage</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients_counter</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of cabbages: 0
Counter({'carrots': 3, 'tomatoes': 2, 'lettuces': 1, 'pineapples': 0})
</code></pre></div></div> <p>Counters extend dictionaries in interesting ways. For instance, they make it easy to find the elements with the most counts:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients_counter</span><span class="p">.</span><span class="nf">most_common</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[('carrots', 3)]
</code></pre></div></div> <h1 id="composite-keys">Composite keys</h1> <p>Since tuples are hashable objects, they can be used as keys:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># store ingredients and purchase date
</span><span class="n">ingredients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span>  <span class="sh">"</span><span class="s">2024-01-04</span><span class="sh">"</span><span class="p">):</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">2024-01-13</span><span class="sh">"</span><span class="p">):</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">2024-01-13</span><span class="sh">"</span><span class="p">):</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div> <p>Then, composite keys are used like this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredients</span><span class="p">[</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">2024-01-13</span><span class="sh">"</span><span class="p">]</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
</code></pre></div></div> <h1 id="use-zip-to-create-dictionaries-from-lists">Use <code class="language-plaintext highlighter-rouge">zip</code> to create dictionaries from lists</h1> <p>When we have two lists of the same length, we can quickly combine them using <code class="language-plaintext highlighter-rouge">zip</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ingredient_list</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">carrots</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">tomatoes</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">lettuces</span><span class="sh">"</span><span class="p">]</span>
<span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">ingredients</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">(</span><span class="nf">zip</span><span class="p">(</span><span class="n">ingredient_list</span><span class="p">,</span> <span class="n">counts</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ingredients</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'carrots': 3, 'tomatoes': 2, 'lettuces': 1}
</code></pre></div></div> <h1 id="further-reading">Further reading</h1> <ul> <li>D. Beazley, <a href="https://github.com/dabeaz-course/python-mastery" rel="external nofollow noopener" target="_blank">Advanced Python Mastery</a> </li> <li>M. Gorelick &amp; I. Ozsvald, High Performance Python: Practical Performant Programming for Humans. Chapter 4. Dictionaries and Sets.</li> <li>B. Slatkin, Effective Python: 90 Specific Ways to Write Better Python.</li> <li>On resizing dictionaries: <a href="https://mail.python.org/pipermail/python-list/2000-March/048085.html" rel="external nofollow noopener" target="_blank">https://mail.python.org/pipermail/python-list/2000-March/048085.html</a> </li> <li>CPython’s implementation of dictionaries: <a href="http://www.laurentluce.com/posts/python-dictionary-implementation/" rel="external nofollow noopener" target="_blank">http://www.laurentluce.com/posts/python-dictionary-implementation/</a> </li> </ul> </div> </article> <div id="giscus_thread" style="max-width: 930px; margin: 0 auto;"> <script>
      let giscusTheme = determineComputedTheme();
      let giscusAttributes = {
        src: 'https://giscus.app/client.js',
        'data-repo': 'hclimente/hclimente.github.io',
        'data-repo-id': '',
        'data-category': 'Comments',
        'data-category-id': '',
        'data-mapping': 'title',
        'data-strict': '1',
        'data-reactions-enabled': '1',
        'data-emit-metadata': '0',
        'data-input-position': 'bottom',
        'data-theme': giscusTheme,
        'data-lang': 'en',
        crossorigin: 'anonymous',
        async: '',
      };

      let giscusScript = document.createElement('script');
      Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
      document.getElementById('giscus_thread').appendChild(giscusScript);
    </script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 Héctor Climente-González. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>